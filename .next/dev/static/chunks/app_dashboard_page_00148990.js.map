{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mouli%20Suri/OneDrive%20-%20University%20of%20Cincinnati/Python/moneytracker-frontend/app/dashboard/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { SignedIn, SignedOut, RedirectToSignIn } from '@clerk/nextjs';\r\n\r\nexport default function DashboardPage() {\r\n  return (\r\n    <>\r\n      <SignedOut>\r\n        <RedirectToSignIn />\r\n      </SignedOut>\r\n\r\n      <SignedIn>\r\n        <DashboardContent />\r\n      </SignedIn>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction DashboardContent() {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [form, setForm] = useState({\r\n    amount: '',\r\n    type: 'EXPENSE',\r\n    category: '',\r\n    description: '',\r\n    date: '',\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchTransactions = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const res = await fetch('/api/transactions');\r\n        if (!res.ok) {\r\n          throw new Error('Failed to load transactions');\r\n        }\r\n        const data = await res.json();\r\n        setTransactions(data);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError('Could not load transactions.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTransactions();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSaving(true);\r\n\r\n    try {\r\n      const res = await fetch('/api/transactions', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(form),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const data = await res.json().catch(() => ({}));\r\n        throw new Error(data.error || 'Failed to save');\r\n      }\r\n\r\n      const newTx = await res.json();\r\n      setTransactions((prev) => [newTx, ...prev]);\r\n\r\n      setForm({\r\n        amount: '',\r\n        type: 'EXPENSE',\r\n        category: '',\r\n        description: '',\r\n        date: '',\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err.message || 'Something went wrong');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"min-h-screen flex flex-col items-center bg-[#fff7f5] px-4 py-8\">\r\n      <div className=\"w-full max-w-2xl bg-white rounded-xl shadow-md p-6 border border-pink-100\">\r\n        <h1 className=\"text-2xl font-bold mb-4 text-[#5b2b29]\">\r\n          MoneyTracker Dashboard ðŸ’¸\r\n        </h1>\r\n\r\n        <p className=\"text-sm text-gray-600 mb-4\">\r\n          Add your income & expenses below. Each entry is saved to your account in the database.\r\n        </p>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md px-3 py-2\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-3 mb-6\">\r\n          <div className=\"flex gap-3\">\r\n            <div className=\"flex-1\">\r\n              <label className=\"block text-sm font-medium mb-1\">Amount</label>\r\n              <input\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                name=\"amount\"\r\n                value={form.amount}\r\n                onChange={handleChange}\r\n                required\r\n                className=\"w-full border rounded-md px-3 py-2 text-sm\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex-1\">\r\n              <label className=\"block text-sm font-medium mb-1\">Type</label>\r\n              <select\r\n                name=\"type\"\r\n                value={form.type}\r\n                onChange={handleChange}\r\n                className=\"w-full border rounded-md px-3 py-2 text-sm\"\r\n              >\r\n                <option value=\"EXPENSE\">Expense</option>\r\n                <option value=\"INCOME\">Income</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">Category</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"category\"\r\n              value={form.category}\r\n              onChange={handleChange}\r\n              placeholder=\"Food, Rent, Shopping...\"\r\n              required\r\n              className=\"w-full border rounded-md px-3 py-2 text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">\r\n              Description (optional)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"description\"\r\n              value={form.description}\r\n              onChange={handleChange}\r\n              className=\"w-full border rounded-md px-3 py-2 text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">\r\n              Date (optional)\r\n            </label>\r\n            <input\r\n              type=\"date\"\r\n              name=\"date\"\r\n              value={form.date}\r\n              onChange={handleChange}\r\n              className=\"w-full border rounded-md px-3 py-2 text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={saving}\r\n            className=\"mt-2 w-full rounded-md px-4 py-2 text-sm font-semibold bg-[#d08e92] text-white hover:bg-[#b97377] disabled:opacity-60\"\r\n          >\r\n            {saving ? 'Saving...' : 'Add Transaction'}\r\n          </button>\r\n        </form>\r\n\r\n        <div>\r\n          <h2 className=\"text-lg font-semibold mb-2 text-[#5b2b29]\">\r\n            Recent Transactions\r\n          </h2>\r\n\r\n          {loading ? (\r\n            <p className=\"text-sm text-gray-500\">Loading...</p>\r\n          ) : transactions.length === 0 ? (\r\n            <p className=\"text-sm text-gray-500\">\r\n              No transactions yet. Add your first one above!\r\n            </p>\r\n          ) : (\r\n            <ul className=\"space-y-2 max-h-64 overflow-y-auto pr-1\">\r\n              {transactions.map((tx) => (\r\n                <li\r\n                  key={tx.id}\r\n                  className=\"flex justify-between items-center border rounded-md px-3 py-2 text-sm\"\r\n                >\r\n                  <div>\r\n                    <div className=\"font-medium\">\r\n                      {tx.category}{' '}\r\n                      <span className=\"text-xs text-gray-500\">\r\n                        ({tx.type.toLowerCase()})\r\n                      </span>\r\n                    </div>\r\n                    {tx.description && (\r\n                      <div className=\"text-xs text-gray-500\">\r\n                        {tx.description}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <div\r\n                      className={\r\n                        'font-semibold ' +\r\n                        (tx.type === 'INCOME'\r\n                          ? 'text-green-600'\r\n                          : 'text-red-600')\r\n                      }\r\n                    >\r\n                      {tx.type === 'INCOME' ? '+' : '-'}$\r\n                      {tx.amount.toFixed(2)}\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-400\">\r\n                      {new Date(tx.date).toLocaleDateString()}\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}