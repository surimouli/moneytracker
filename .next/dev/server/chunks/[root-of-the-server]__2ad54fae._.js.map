{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mouli%20Suri/OneDrive%20-%20University%20of%20Cincinnati/Python/moneytracker-frontend/lib/prisma.js"],"sourcesContent":["// lib/prisma.js\r\n\r\nimport 'dotenv/config';               // make sure .env is loaded\r\nimport { PrismaClient } from '@prisma/client';\r\nimport { PrismaPg } from '@prisma/adapter-pg';\r\n\r\nconst connectionString = process.env.DATABASE_URL;\r\n\r\nif (!connectionString) {\r\n  throw new Error('DATABASE_URL is not set in the environment');\r\n}\r\n\r\n// Prisma 7 \"client\" engine needs an adapter\r\nconst adapter = new PrismaPg({\r\n  connectionString,\r\n});\r\n\r\nlet prisma;\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  prisma = new PrismaClient({ adapter });\r\n} else {\r\n  // avoid creating many clients in dev (Next hot reload)\r\n  if (!global.prisma) {\r\n    global.prisma = new PrismaClient({\r\n      adapter,\r\n      log: ['warn', 'error'],\r\n    });\r\n  }\r\n  prisma = global.prisma;\r\n}\r\n\r\nexport { prisma };"],"names":[],"mappings":"AAAA,gBAAgB;;;;;AAEhB,sOAAsC,2BAA2B;AACjE;AACA;;;;;;;;AAEA,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY;AAEjD,IAAI,CAAC,kBAAkB;IACrB,MAAM,IAAI,MAAM;AAClB;AAEA,4CAA4C;AAC5C,MAAM,UAAU,IAAI,yKAAQ,CAAC;IAC3B;AACF;AAEA,IAAI;AAEJ;;KAEO;IACL,uDAAuD;IACvD,IAAI,CAAC,yDAAO,MAAM,EAAE;QAClB,yDAAO,MAAM,GAAG,IAAI,6IAAY,CAAC;YAC/B;YACA,KAAK;gBAAC;gBAAQ;aAAQ;QACxB;IACF;IACA,SAAS,yDAAO,MAAM;AACxB"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mouli%20Suri/OneDrive%20-%20University%20of%20Cincinnati/Python/moneytracker-frontend/app/api/categories/route.js"],"sourcesContent":["// app/api/categories/route.js\r\n\r\nexport const runtime = 'nodejs';\r\n\r\nimport { NextResponse } from 'next/server';\r\nimport { prisma } from '../../../lib/prisma';\r\n\r\n// GET /api/categories?userId=...\r\nexport async function GET(request) {\r\n  try {\r\n    const { searchParams } = new URL(request.url);\r\n    const userId = searchParams.get('userId');\r\n\r\n    if (!userId) {\r\n      return NextResponse.json(\r\n        { error: 'Missing userId' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const categories = await prisma.category.findMany({\r\n      where: { userId },\r\n      orderBy: { name: 'asc' },\r\n    });\r\n\r\n    return NextResponse.json(categories, { status: 200 });\r\n  } catch (err) {\r\n    console.error('GET /api/categories error:', err);\r\n    return NextResponse.json(\r\n      { error: err.message || 'Internal Server Error' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// POST /api/categories  { userId, name }\r\nexport async function POST(request) {\r\n  try {\r\n    const body = await request.json();\r\n    const { userId, name } = body;\r\n\r\n    if (!userId) {\r\n      return NextResponse.json(\r\n        { error: 'Missing userId' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    if (!name || !name.trim()) {\r\n      return NextResponse.json(\r\n        { error: 'Category name is required' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const trimmed = name.trim();\r\n\r\n    // Optional: avoid exact duplicates per user\r\n    const existing = await prisma.category.findFirst({\r\n      where: { userId, name: trimmed },\r\n    });\r\n\r\n    if (existing) {\r\n      return NextResponse.json(\r\n        { error: 'You already have a category with that name' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const created = await prisma.category.create({\r\n      data: {\r\n        userId,\r\n        name: trimmed,\r\n      },\r\n    });\r\n\r\n    return NextResponse.json(created, { status: 201 });\r\n  } catch (err) {\r\n    console.error('POST /api/categories error:', err);\r\n    return NextResponse.json(\r\n      { error: err.message || 'Internal Server Error' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// DELETE /api/categories  { userId, id }\r\nexport async function DELETE(request) {\r\n  try{\r\n    const body = await request.json();\r\n    const { userId, id } = body;\r\n\r\n    if (!userId) {\r\n      return NextResponse.json(\r\n        { error: 'Missing userId' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    if (!id) {\r\n      return NextResponse.json(\r\n        { error: 'Missing category id' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    await prisma.category.deleteMany({\r\n      where: {\r\n        id: Number(id),\r\n        userId,\r\n      },\r\n    });\r\n\r\n    return NextResponse.json({ success: true }, { status: 200 });\r\n  } catch (err) {\r\n    console.error('DELETE /api/categories error:', err);\r\n    return NextResponse.json(\r\n      { error: err.message || 'Internal Server Error' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;;;;;;AAI9B;AACA;;;;;AAHO,MAAM,UAAU;;;AAMhB,eAAe,IAAI,OAAO;IAC/B,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,SAAS,aAAa,GAAG,CAAC;QAEhC,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,aAAa,MAAM,yHAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAChD,OAAO;gBAAE;YAAO;YAChB,SAAS;gBAAE,MAAM;YAAM;QACzB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,YAAY;YAAE,QAAQ;QAAI;IACrD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,IAAI,OAAO,IAAI;QAAwB,GAChD;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG;QAEzB,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI;YACzB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA4B,GACrC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,KAAK,IAAI;QAEzB,4CAA4C;QAC5C,MAAM,WAAW,MAAM,yHAAM,CAAC,QAAQ,CAAC,SAAS,CAAC;YAC/C,OAAO;gBAAE;gBAAQ,MAAM;YAAQ;QACjC;QAEA,IAAI,UAAU;YACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA6C,GACtD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,MAAM,yHAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC3C,MAAM;gBACJ;gBACA,MAAM;YACR;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IAClD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,IAAI,OAAO,IAAI;QAAwB,GAChD;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,OAAO,OAAO;IAClC,IAAG;QACD,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,EAAE,EAAE,GAAG;QAEvB,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,CAAC,IAAI;YACP,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsB,GAC/B;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,yHAAM,CAAC,QAAQ,CAAC,UAAU,CAAC;YAC/B,OAAO;gBACL,IAAI,OAAO;gBACX;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK,GAAG;YAAE,QAAQ;QAAI;IAC5D,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,IAAI,OAAO,IAAI;QAAwB,GAChD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}